<div class="container-fluid login-special d-flex flex-column justify-content-center" [ngClass]="{'p-2': _breakpointService.screenSize.width < 568 }">
    <div class="row justify-content-center align-items-center">
        <div class="col-sm-12 col-md-9 col-lg-7 col-xl-5 col-xxl-4">
            <div class="card shadow-lg" [ngClass]="{'mt-4 mb-4': _breakpointService.screenSize.width >= 568 }">
                <div class="card-body mt-4">
                    <form>
                        <!-- Panel Başlığı -->
                        <h2 class="card-title text-center fs-3">İş Yönetimine Hoşgeldiniz!</h2>
                        <!-- /Panel Başlığı -->

                        <!-- Panel Yazısı -->
                        <p class="card-text text-center">Lütfen hesabınızda oturum açın.</p>
                        <!-- /Panel Yazısı -->

                        <!-- Hata Bildirimi -->
                        <ngb-alert [type]="'danger'" [dismissible]="false" *ngIf="errorPhone !== '' || errorEmail !== ''">
                            <div class="alert-body">
                            <p>{{ errorPhone }}</p>
                            <p>{{ errorEmail }}</p>
                            </div>
                        </ngb-alert>
                        <!-- /Hata Bildirimi -->

                        <!-- Form Konteynırı -->
                        <ul ngbNav #navWithIcons="ngbNav" class="nav-tabs justify-content-center">
                            <li ngbNavItem>
                                <a ngbNavLink (click)="resetForms()">
                                    <i class="fas fa-phone-alt"></i>
                                    <span>Telefon</span>
                                </a>
                                <ng-template ngbNavContent>
                                    
                                    <!-- Telefonla Giriş Formu -->
                                    <form [formGroup]="phoneForm" (ngSubmit)="loginWithPhone()">

                                        <!-- Telefon Numarası -->
                                        <div class="mt-3 mb-3">
                                            <label class="form-label" for="phone-form-phone">Telefon Numarası</label>
                                            <input
                                                id="phone-form-phone"
                                                type="number"
                                                formControlName="phone"
                                                class="form-control"
                                                [ngClass]="{ 'is-invalid': submittedPhone && phoneForm.value.phone.errors }"
                                                placeholder="5554443322"
                                                tabindex="1"
                                            />
                                            <div *ngIf="submittedPhone && phoneForm.value.phone.errors">
                                                <div *ngIf="phoneForm.value.phone.errors.required">Lütfen telefon numaranızı giriniz.</div>
                                            </div>
                                        </div>
                                        <!-- /Telefon Numarası -->

                                        <!-- Şifre -->
                                        <div class="mt-3 mb-3">
                                            <div class="d-flex justify-content-between mb-2">
                                                <label for="phone-form-password">Şifre</label>

                                                <!-- Şifremi Unuttum Linki -->
                                                <a routerLink="/pages/authentication/forgot-password-v2"><small>Şifremi Unuttum</small></a>
                                                <!-- /Şifremi Unuttum Linki -->

                                            </div>
                                            <div class="input-group">
                                                <input
                                                    id="phone-form-password"
                                                    [type]="passwordTextType ? 'text' : 'password'"
                                                    formControlName="password"
                                                    class="form-control"
                                                    [ngClass]="{ 'is-invalid': submittedPhone && phoneForm.value.password.errors }"
                                                    placeholder="******"
                                                    tabindex="2"
                                                />
                                                <button class="btn btn-outline-success" type="button" (click)="togglePasswordTextType()">
                                                    <i 
                                                        class="fas" 
                                                        [ngClass]="{
                                                            'fa-eye-slash': passwordTextType,
                                                            'fa-eye': !passwordTextType
                                                        }"
                                                    >
                                                    </i>
                                                </button>
                                            </div>
                                            <div *ngIf="submittedPhone && phoneForm.value.password.errors">
                                                <div *ngIf="phoneForm.value.password.errors.required">Lütfen şifrenizi giriniz.</div>
                                            </div>
                                        </div>
                                        <!-- /Şifre -->

                                        <!-- Oturum Süresi -->
                                        <div class="mt-3 mb-3">
                                            <label class="mb-2" for="phone-form-auth-duration">Oturum Süresi</label>
                                            <ng-select
                                            id="phone-form-auth-duration"
                                            [items]="refreshTokenDurationOptions"
                                            formControlName="refreshTokenDuration"
                                            bindLabel="duration"
                                            bindValue="id"
                                            [clearable]="false"
                                            [searchable]="false"
                                            tabindex="3">
                                            </ng-select>
                                        </div>
                                        <!-- /Oturum Süresi -->

                                        <!-- Giriş Butonu -->
                                        <div class="mt-4  d-grid col-12">
                                            <button [disabled]="loadingPhone" class="btn btn-success" tabindex="4">
                                                <span *ngIf="loadingPhone" class="spinner-border spinner-border-sm mr-1"></span>Giriş Yap
                                            </button>
                                        </div>
                                        <!-- /Giriş Butonu -->

                                    </form>
                                    <!-- /Telefonla Giriş Formu -->

                                </ng-template>
                            </li>
                            <li ngbNavItem>
                                <a ngbNavLink (click)="resetForms()">
                                    <i class="fas fa-envelope"></i>
                                    <span>E-Posta</span>
                                </a>
                                <ng-template ngbNavContent>

                                    <!-- E-Postayla Giriş Formu -->
                                    <form [formGroup]="emailForm" (ngSubmit)="loginWithEmail()">

                                        <!-- E-Posta -->
                                        <div class="mt-3 mb-3">
                                            <label class="form-label" for="email-form-email">E-Posta</label>
                                            <input
                                                id="email-form-email"
                                                type="text"
                                                formControlName="email"
                                                class="form-control"
                                                [ngClass]="{ 'is-invalid': submittedEmail && emailForm.value.email.errors }"
                                                placeholder="example@mail.com"
                                                tabindex="1"
                                            />
                                            <div *ngIf="submittedEmail && emailForm.value.email.errors">
                                                <div *ngIf="emailForm.value.email.errors.required">Lütfen e-posta adresinizi giriniz.</div>
                                            </div>
                                        </div>
                                        <!-- /E-Posta -->

                                        <!-- Şifre -->
                                        <div class="mt-3 mb-3">
                                            <div class="d-flex justify-content-between mb-2">
                                                <label for="email-form-password">Şifre</label>

                                                <!-- Şifremi Unuttum Linki -->
                                                <a routerLink="/pages/authentication/forgot-password-v2"><small>Şifremi Unuttum</small></a>
                                                <!-- /Şifremi Unuttum Linki -->

                                            </div>
                                            <div class="input-group">
                                                <input
                                                    id="email-form-password"
                                                    [type]="passwordTextType ? 'text' : 'password'"
                                                    formControlName="password"
                                                    class="form-control"
                                                    [ngClass]="{ 'is-invalid': submittedEmail && emailForm.value.password.errors }"
                                                    placeholder="******"
                                                    tabindex="2"
                                                />
                                                <button class="btn btn-outline-success" type="button" (click)="togglePasswordTextType()">
                                                    <i 
                                                        class="fas" 
                                                        [ngClass]="{
                                                            'fa-eye-slash': passwordTextType,
                                                            'fa-eye': !passwordTextType
                                                        }"
                                                    >
                                                    </i>
                                                </button>
                                            </div>
                                            <div *ngIf="submittedEmail && emailForm.value.password.errors">
                                                <div *ngIf="emailForm.value.password.errors.required">Lütfen şifrenizi giriniz.</div>
                                            </div>
                                        </div>
                                        <!-- /Şifre -->

                                        <!-- Oturum Süresi -->
                                        <div class="mt-3 mb-3">
                                            <label class="mb-2" for="email-form-auth-duration">Oturum Süresi</label>
                                            <ng-select
                                            id="email-form-auth-duration"
                                            [items]="refreshTokenDurationOptions"
                                            formControlName="refreshTokenDuration"
                                            bindLabel="duration"
                                            bindValue="id"
                                            [clearable]="false"
                                            [searchable]="false"
                                            tabindex="3">
                                            </ng-select>
                                        </div>
                                        <!-- /Oturum Süresi -->

                                        <!-- Giriş Butonu -->
                                        <div class="mt-4  d-grid col-12">
                                            <button [disabled]="loadingEmail" class="btn btn-success" tabindex="4">
                                                <span *ngIf="loadingEmail" class="spinner-border spinner-border-sm mr-1"></span>Giriş Yap
                                            </button>
                                        </div>
                                        <!-- /Giriş Butonu -->

                                    </form>
                                    <!-- /E-Postayla Giriş Formu -->
                                </ng-template>
                            </li>
                        </ul>
                        <div [ngbNavOutlet]="navWithIcons" class="mt-2"></div>
                        <!-- /Form Konteynırı -->

                        <!-- Kayıt Sayfasına Geçiş -->
                        <p class="text-center mt-2">
                            <span>Hesabınız yok mu?</span
                            ><a routerLink="/public/register"><span>&nbsp;Hemen Kaydolun.</span></a>
                        </p>
                        <!-- /Kayıt Sayfasına Geçiş -->

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
